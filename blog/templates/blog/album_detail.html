{% extends 'blog/base.html' %}

{% block content %}
    <h2>{{ album.title }}</h2>
    <p>{{ album.description }}</p>
    <a class="btn btn-primary" href="{% url 'upload_photos' album.id %}">
        <i class="bi bi-upload"></i> Upload Photos</a>
    <a class="btn btn-outline-primary" href="{% url 'edit_album' album.id %}">
        <i class="bi bi-pencil"></i> Edit Album</a>
    <h2>Photos in this album:</h2>
    <div class="row album-photos">
        {% for photo in photos %}
            <a href="{% url 'photo_detail' photo.id %}" class="col card p-0">
                <img src="{{ photo.image.url }}" alt="{{ photo.caption }}" width="100" />

                <div class="photo-details p-2">
                    <span>{{ photo.caption }}</span>
                    <button class="btn btn-light" onclick="confirmDelete('{{ photo.id }}')">
                        <i class="bi bi-trash"></i>
                    </button>
                </div>
            </a>
        {% endfor %}
    </div>


    <script type="text/javascript">
        // Function to confirm the deletion of an image
        function confirmDelete(photoId) {
            if (confirm("Are you sure you want to delete this photo?")) {
                // Redirect to the delete URL for that specific photo
                window.location.href = '/delete_photo/' + photoId + '/';
            }
        }
    </script>
{% endblock %}